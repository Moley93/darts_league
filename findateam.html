<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" href="cdl.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="CDL | Find a Team">
    <meta property="og:description" content="The official website of the Crawley Darts League featuring Premier and A Divisions. Register to join a team in the Crawley Darts League.">
    <meta property="og:image" content="https://crawleydartsleague.com/cdl-logo.png">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://crawleydartsleague.com/index.html">
    
    <title>CDL | Find a Team</title>
    <link rel="stylesheet" href="styles.css">
    
    <style>
        /* Additional styles for the simplified Find a Team page */
        .player-registration-section {
            margin-bottom: 40px;
        }

        .player-registration-section h2 {
            color: var(--primary);
            border-bottom: 2px solid var(--secondary);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        .info-alert {
            background-color: #e3f2fd;
            border-left: 4px solid var(--primary);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0 4px 4px 0;
        }

        .info-alert h3 {
            margin-top: 0;
            color: var(--primary);
        }

        .info-alert p:last-child {
            margin-bottom: 0;
        }

        /* Form styles */
        .registration-form {
            background-color: #f9f9f9;
            padding: 25px;
            border-radius: 8px;
            margin-top: 30px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .registration-form label {
            font-weight: 500;
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-col {
            flex: 1 1 300px;
        }

        .checkbox-group {
            margin: 15px 0;
        }

        .checkbox-option {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }

        .checkbox-option input[type="checkbox"] {
            margin-right: 10px;
        }

        .radio-group {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 15px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            margin-right: 20px;
        }

        .radio-option input[type="radio"] {
            margin-right: 5px;
        }

        textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--medium-gray);
            border-radius: 4px;
            min-height: 100px;
            resize: vertical;
        }

        /* Success message */
        .success-message {
            background-color: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 4px 4px 0;
            display: none;
        }
        
        .success-message h3 {
            margin-top: 0;
            color: #2e7d32;
        }
        
        /* Required field indicator */
        .required {
            color: #f44336;
            margin-left: 3px;
        }
        
        .field-help {
            font-size: 0.85em;
            color: var(--dark-gray);
            margin-top: 3px;
        }
        
        /* Available days grid */
        .days-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 10px;
        }

        /* Custom header style for the index page to position logo left and title centered */
        .header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .logo-container {
            position: absolute;
            right: 20px;
            top: 55%;
            transform: translateY(-50%);
        }
        
        .logo {
            width: 60px;
            height: 58px;
            object-fit: contain;
        }
        
        .header h1 {
            margin: 0;
            text-align: center;
        }
        
        /* Basic dropdown styling */
        .nav .dropdown {
            position: relative;
        }

        .nav .dropdown-toggle {
            cursor: pointer;
        }

        .nav .dropdown-menu {
            display: none;
            position: absolute;
            background: white;
            min-width: 200px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            z-index: 1000;
            border-radius: 4px;
            padding: 10px 0;
        }

        .nav .dropdown:hover .dropdown-menu {
            display: block;
        }

        .nav .dropdown-menu li {
            margin: 0;
            padding: 0;
        }

        .nav .dropdown-menu a {
            display: block;
            padding: 10px 20px;
            color: var(--primary);
            border-radius: 0;
        }

        .nav .dropdown-menu a:hover {
            background-color: var(--light-gray);
        }

        /* Mobile navigation */
        .mobile-nav-toggle {
            display: none;
            cursor: pointer;
            padding: 10px;
            font-size: 1.5rem;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .mobile-nav-toggle {
                display: block;
            }
            
            .nav-menu {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                width: 100%;
                background: white;
                box-shadow: 0 5px 10px rgba(0,0,0,0.1);
                z-index: 1000;
                padding: 0;
                margin: 0;
            }
            
            .nav-menu.active {
                display: block;
            }
            
            .nav-menu li {
                margin: 0;
                padding: 0;
                display: block;
                border-bottom: 1px solid var(--light-gray);
            }
            
            .nav-menu a {
                padding: 15px 20px;
                display: block;
            }
            
            .nav .dropdown-menu {
                position: static;
                box-shadow: none;
                background: var(--light-gray);
                width: 100%;
                padding: 0;
            }
            
            .nav .dropdown-menu li:first-child {
                border-top: 1px solid var(--medium-gray);
            }
            
            .nav .dropdown:hover .dropdown-menu {
                display: none; /* Don't show on hover on mobile */
            }
            
            /* Add a + icon to dropdowns */
            .nav .dropdown-toggle::after {
                content: "+";
                margin-left: 5px;
            }
            
            /* Toggle this class with JavaScript */
            .nav .dropdown.active .dropdown-menu {
                display: block;
            }
            
            .nav .dropdown.active .dropdown-toggle::after {
                content: "-";
            }
        }

        /* Tab styles for player/partial team selection */
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid var(--medium-gray);
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: 1px solid transparent;
            border-bottom: none;
            border-radius: 4px 4px 0 0;
            margin-right: 5px;
            background-color: var(--light-gray);
            transition: all 0.3s ease;
        }
        
        .tab.active {
            background-color: white;
            border-color: var(--medium-gray);
            position: relative;
            font-weight: bold;
            color: var(--primary);
        }
        
        .tab.active::after {
            content: "";
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 1px;
            background-color: white;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Error message */
        .error-message {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 4px 4px 0;
            display: none;
        }
        
        .error-message h3 {
            margin-top: 0;
            color: #c62828;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 10px;
            }
            
            .radio-group {
                flex-direction: column;
                gap: 8px;
            }
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="logo-container">
            <img src="cdl-logo.png" alt="Crawley Darts League Logo" class="logo">
        </div>
        <h1>Crawley Darts League</h1>
        <button class="mobile-toggle" aria-label="Toggle menu">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>
    </header>
    
    <nav class="nav">
        <ul class="nav-menu">
            <li><a href="index.html">Home</a></li>
            
            <li class="dropdown">
                <a href="#" class="dropdown-toggle">League</a>
                <ul class="dropdown-menu">
                    <li><a href="leaguetable.html">League Table</a></li>
                    <li><a href="leaguefixtures.html">Fixtures</a></li>
                    <li><a href="leagueresults.html">Results</a></li>
                </ul>
            </li>
            
            <li class="dropdown">
                <a href="#" class="dropdown-toggle">Cup</a>
                <ul class="dropdown-menu">
                    <li><a href="cupbracket.html">Bracket</a></li>
                    <li><a href="cupdraw.html">Cup Draw</a></li>
                </ul>
            </li>
            
            <li class="dropdown">
                <a href="#" class="dropdown-toggle">Statistics</a>
                <ul class="dropdown-menu">
                    <li><a href="180sfinishes.html">180s & High Finishes</a></li>
                    <li><a href="playerrankings.html">Player Rankings</a></li>
                </ul>
            </li>
            
            <li class="dropdown">
                <a href="#" class="dropdown-toggle">Information</a>
                <ul class="dropdown-menu">
                    <li><a href="contactinfo.html">Contacts & Venues</a></li>
                    <li><a href="rules.html">League Rules</a></li>
                    <li><a href="agm-minutes.html">AGM Minutes</a></li>
                    <li><a href="players.html">Players</a></li>
                </ul>
            </li>
            
            <li class="dropdown">
                <a href="#" class="dropdown-toggle">Submit Score</a>
                <ul class="dropdown-menu">
                    <li><a href="scoreinput.html">Submit Score</a></li>
                    <li><a href="editscores.html">Edit Score</a></li>
                </ul>
            </li>
    
            <li class="dropdown">
                <a href="#" class="dropdown-toggle">Join</a>
                <ul class="dropdown-menu">
                    <li><a href="registration.html">Registration Form</a></li>
                    <li><a href="findateam.html">Find a Team</a></li>
                </ul>
            </li>
        </ul>
    </nav>

    <div class="container">
        <div class="card">
            <div class="player-registration-section">
                <h1>Find a Team - Player Registration</h1>
                
                <p>Welcome to the Crawley Darts League player registration page. If you're looking to join a team in the Crawley Darts League, this is the right place to register your interest.</p>
                <br><br>
                
                <div class="info-alert">
                    <h3>About This Service</h3>
                    <p>The Crawley Darts League recognizes that finding a team can sometimes be challenging for new players. This service aims to connect players with teams to ensure everyone who wants to play darts can participate in our league.</p>
                    <p>Your registration information will be sent directly to the league organizers, who will help match you with an appropriate team based on your experience, location, and availability.</p>
                </div>

                <div class="tabs">
                    <div class="tab active" data-tab="player-register">Register as an Individual Player</div>
                    <div class="tab" data-tab="partial-team">Register as a Partial Team</div>
                </div>
                
                <!-- Individual Player Registration Tab -->
                <div id="player-register" class="tab-content active">
                    <h2>Register as a Player Looking for a Team</h2>
                    
                    <p>Fill out the form below to register your interest in joining a team. The league organizers will work to match you with a team that suits your location, experience level, and availability.</p>
                    
                    <div class="registration-form">
                        <form id="individual-player-form">
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="player-name">Full Name <span class="required">*</span></label>
                                        <input type="text" id="player-name" name="playerName" required>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="player-email">Email <span class="required">*</span></label>
                                        <input type="email" id="player-email" name="playerEmail" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="player-phone">Contact Number <span class="required">*</span></label>
                                        <input type="tel" id="player-phone" name="playerPhone" required>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="player-location">Area/Location <span class="required">*</span></label>
                                        <input type="text" id="player-location" name="playerLocation" placeholder="e.g. Three Bridges, Crawley" required>
                                        <div class="field-help">This helps us match you with nearby teams</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Playing Experience <span class="required">*</span></label>
                                <div class="radio-group">
                                    <div class="radio-option">
                                        <input type="radio" id="experience-beginner" name="experience" value="beginner" required>
                                        <label for="experience-beginner">Beginner</label>
                                    </div>
                                    <div class="radio-option">
                                        <input type="radio" id="experience-casual" name="experience" value="casual">
                                        <label for="experience-casual">Casual Player</label>
                                    </div>
                                    <div class="radio-option">
                                        <input type="radio" id="experience-experienced" name="experience" value="experienced">
                                        <label for="experience-experienced">Experienced</label>
                                    </div>
                                    <div class="radio-option">
                                        <input type="radio" id="experience-competitive" name="experience" value="competitive">
                                        <label for="experience-competitive">Competitive</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Played in a league before?</label>
                                <div class="radio-group">
                                    <div class="radio-option">
                                        <input type="radio" id="league-yes" name="league-experience" value="yes">
                                        <label for="league-yes">Yes</label>
                                    </div>
                                    <div class="radio-option">
                                        <input type="radio" id="league-no" name="league-experience" value="no">
                                        <label for="league-no">No</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group" id="previous-league-container" style="display: none;">
                                <label for="previous-league">Which league(s) have you played in?</label>
                                <input type="text" id="previous-league" name="previousLeague" placeholder="e.g. Crawley Darts League, Sussex Super League, etc.">
                            </div>
                            
                            <div class="form-group">
                                <label>Division Preference (if any)</label>
                                <div class="radio-group">
                                    <div class="radio-option">
                                        <input type="radio" id="division-premier" name="division-preference" value="premier">
                                        <label for="division-premier">Premier Division</label>
                                    </div>
                                    <div class="radio-option">
                                        <input type="radio" id="division-a" name="division-preference" value="a">
                                        <label for="division-a">A Division</label>
                                    </div>
                                    <div class="radio-option">
                                        <input type="radio" id="division-any" name="division-preference" value="any" checked>
                                        <label for="division-any">No Preference</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Available Days <span class="required">*</span></label>
                                <div class="field-help">League matches are typically on Friday evenings, but please indicate other days you might be available for practice</div>
                                <div class="days-grid">
                                    <div class="checkbox-option">
                                        <input type="checkbox" id="day-monday" name="availableDays" value="monday">
                                        <label for="day-monday">Monday</label>
                                    </div>
                                    <div class="checkbox-option">
                                        <input type="checkbox" id="day-tuesday" name="availableDays" value="tuesday">
                                        <label for="day-tuesday">Tuesday</label>
                                    </div>
                                    <div class="checkbox-option">
                                        <input type="checkbox" id="day-wednesday" name="availableDays" value="wednesday">
                                        <label for="day-wednesday">Wednesday</label>
                                    </div>
                                    <div class="checkbox-option">
                                        <input type="checkbox" id="day-thursday" name="availableDays" value="thursday">
                                        <label for="day-thursday">Thursday</label>
                                    </div>
                                    <div class="checkbox-option">
                                        <input type="checkbox" id="day-friday" name="availableDays" value="friday" checked>
                                        <label for="day-friday">Friday</label>
                                    </div>
                                    <div class="checkbox-option">
                                        <input type="checkbox" id="day-saturday" name="availableDays" value="saturday">
                                        <label for="day-saturday">Saturday</label>
                                    </div>
                                    <div class="checkbox-option">
                                        <input type="checkbox" id="day-sunday" name="availableDays" value="sunday">
                                        <label for="day-sunday">Sunday</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="player-notes">Additional Information</label>
                                <textarea id="player-notes" name="playerNotes" placeholder="Tell us anything else that might be relevant (e.g. transport limitations, venue preferences, etc.)"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <div class="checkbox-option">
                                    <input type="checkbox" id="player-consent" name="consent" required>
                                    <label for="player-consent">I consent for my information to be shared with the Crawley Darts League committee and team captains <span class="required">*</span></label>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn">Submit Registration</button>
                        </form>
                    </div>
                    
                    <div class="success-message" id="player-success">
                        <h3>Registration Successful!</h3>
                        <p>Thank you for registering your interest in joining a team in the Crawley Darts League. Your information has been sent to our League Secretary who will be in touch soon.</p>
                        <p>If you have any questions in the meantime, please contact our League Secretary at <a href="mailto:example@crawleydartsleague.com">example@crawleydartsleague.com</a>.</p>
                    </div>

                    <div class="error-message" id="player-error">
                        <h3>Registration Error</h3>
                        <p>There was a problem submitting your registration. Please try again or contact our League Secretary directly at <a href="mailto:example@crawleydartsleague.com">example@crawleydartsleague.com</a>.</p>
                    </div>
                </div>
                
                <!-- Partial Team Registration Tab -->
                <div id="partial-team" class="tab-content">
                    <h2>Register as a Partial Team</h2>
                    <p>If you have a group of players but not enough to form a complete team (minimum 8 players required), complete this form and we'll help you find additional players or potentially merge with another group.</p>
                    
                    <div class="registration-form">
                        <form id="partial-team-form">
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="group-name">Group/Team Name (if any)</label>
                                        <input type="text" id="group-name" name="groupName" placeholder="Optional - what you call your group">
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="current-players">Current Number of Players <span class="required">*</span></label>
                                        <select id="current-players" name="currentPlayers" required>
                                            <option value="">Select Number</option>
                                            <option value="1">1 (Just me)</option>
                                            <option value="2">2</option>
                                            <option value="3">3</option>
                                            <option value="4">4</option>
                                            <option value="5">5</option>
                                            <option value="6">6</option>
                                            <option value="7">7</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="contact-name">Main Contact Name <span class="required">*</span></label>
                                        <input type="text" id="contact-name" name="contactName" required>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="contact-email">Contact Email <span class="required">*</span></label>
                                        <input type="email" id="contact-email" name="contactEmail" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="contact-phone">Contact Phone <span class="required">*</span></label>
                                        <input type="tel" id="contact-phone" name="contactPhone" required>
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="preferred-location">Preferred Location/Area <span class="required">*</span></label>
                                        <input type="text" id="preferred-location" name="preferredLocation" placeholder="e.g. Three Bridges, Crawley" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="preferred-venue">Preferred Venue (if any)</label>
                                        <input type="text" id="preferred-venue" name="preferredVenue" placeholder="Do you have a venue in mind?">
                                    </div>
                                </div>
                                <div class="form-col">
                                    <div class="form-group">
                                        <label for="preferred-division">Preferred Division</label>
                                        <select id="preferred-division" name="preferredDivision">
                                            <option value="any">No Preference</option>
                                            <option value="premier">Premier Division</option>
                                            <option value="a">A Division</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label>Player Experience Levels <span class="required">*</span></label>
                                <div class="radio-group">
                                    <div class="radio-option">
                                        <input type="radio" id="group-beginner" name="group-experience" value="beginner" required>
                                        <label for="group-beginner">Mostly Beginners</label>
                                    </div>
                                    <div class="radio-option">
                                        <input type="radio" id="group-mixed" name="group-experience" value="mixed">
                                        <label for="group-mixed">Mixed Experience Levels</label>
                                    </div>
                                    <div class="radio-option">
                                        <input type="radio" id="group-experienced" name="group-experience" value="experienced">
                                        <label for="group-experienced">Mostly Experienced</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="group-notes">Additional Information</label>
                                <textarea id="group-notes" name="groupNotes" placeholder="Tell us more about your group and what you're looking for"></textarea>
                            </div>
                            
                            <div class="form-group">
                                <div class="checkbox-option">
                                    <input type="checkbox" id="merge-willing" name="mergeWilling" checked>
                                    <label for="merge-willing">We are willing to consider merging with another partial team</label>
                                </div>
                            </div>

                            <div class="form-group">
                                <div class="checkbox-option">
                                    <input type="checkbox" id="group-consent" name="consent" required>
                                    <label for="group-consent">I consent for our information to be shared with the Crawley Darts League committee <span class="required">*</span></label>
                                </div>
                            </div>
                            
                            <button type="submit" class="btn">Submit Registration</button>
                        </form>
                    </div>
                    
                    <div class="success-message" id="partial-team-success">
                        <h3>Partial Team Registration Successful!</h3>
                        <p>Thank you for registering your partial team. Your information has been sent to our League Secretary who will be in touch to help you find additional players or potentially merge with another group.</p>
                        <p>If you have any questions in the meantime, please contact our League Secretary at <a href="mailto:example@crawleydartsleague.com">example@crawleydartsleague.com</a>.</p>
                    </div>

                    <div class="error-message" id="partial-team-error">
                        <h3>Registration Error</h3>
                        <p>There was a problem submitting your registration. Please try again or contact our League Secretary directly at <a href="mailto:example@crawleydartsleague.com">example@crawleydartsleague.com</a>.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Tab functionality
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remove active class from all tabs
                    tabs.forEach(t => t.classList.remove('active'));
                    
                    // Add active class to clicked tab
                    this.classList.add('active');
                    
                    // Hide all content
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    
                    // Show content for clicked tab
                    const contentId = this.getAttribute('data-tab');
                    document.getElementById(contentId).classList.add('active');
                });
            });
            
            // Toggle league experience fields
            const leagueExperienceRadios = document.querySelectorAll('input[name="league-experience"]');
            leagueExperienceRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    const previousLeagueContainer = document.getElementById('previous-league-container');
                    if (this.value === 'yes') {
                        previousLeagueContainer.style.display = 'block';
                    } else {
                        previousLeagueContainer.style.display = 'none';
                    }
                });
            });
            
            // Function to collect form data
            function collectFormData(form) {
                const formData = new FormData(form);
                let formDataObject = {};
                
                // Convert FormData to object
                formData.forEach((value, key) => {
                    // Handle checkboxes (multiple values with same name)
                    if (key === 'availableDays') {
                        if (!formDataObject[key]) {
                            formDataObject[key] = [];
                        }
                        formDataObject[key].push(value);
                    } else {
                        formDataObject[key] = value;
                    }
                });
                
                return formDataObject;
            }
            
            // Function to format email body
            function formatIndividualPlayerEmail(data) {
                // Convert available days array to string if it exists
                let availableDays = data.availableDays || [];
                if (!Array.isArray(availableDays)) {
                    availableDays = [availableDays]; // Convert single value to array
                }
                
                return `
New Player Registration
======================

Name: ${data.playerName || 'Not provided'}
Email: ${data.playerEmail || 'Not provided'}
Phone: ${data.playerPhone || 'Not provided'}
Location: ${data.playerLocation || 'Not provided'}
Experience: ${data.experience || 'Not provided'}
League Experience: ${data.leagueExperience || 'No'}
${data.leagueExperience === 'yes' ? 'Previous League: ' + (data.previousLeague || 'Not specified') : ''}
Division Preference: ${data.divisionPreference || 'Any'}
Available Days: ${availableDays.join(', ') || 'None selected'}
Additional Notes: ${data.playerNotes || 'None'}
`;
            }
            
            // Function to format partial team email
            function formatPartialTeamEmail(data) {
                return `
Partial Team Registration
========================

Group/Team Name: ${data.groupName || 'Not provided'}
Current Players: ${data.currentPlayers || 'Not provided'}
Contact Name: ${data.contactName || 'Not provided'}
Contact Email: ${data.contactEmail || 'Not provided'}
Contact Phone: ${data.contactPhone || 'Not provided'}
Preferred Location: ${data.preferredLocation || 'Not provided'}
Preferred Venue: ${data.preferredVenue || 'Not provided'}
Preferred Division: ${data.preferredDivision || 'Any'}
Experience Level: ${data.groupExperience || 'Not provided'}
Willing to Merge: ${data.mergeWilling ? 'Yes' : 'No'}
Additional Notes: ${data.groupNotes || 'None'}
`;
            }
            
            // Function to simulate sending an email
            function sendEmail(recipient, subject, body) {
                // In a real implementation, this would use a web API service like EmailJS, Formspree, or a server-side processing
                console.log(`Sending email to: ${recipient}`);
                console.log(`Subject: ${subject}`);
                console.log(`Body: ${body}`);
                
                // Simulate network request with a timeout and random success/failure
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        // 90% success rate for demonstration
                        if (Math.random() < 0.9) {
                            resolve('Email sent successfully');
                        } else {
                            reject('Failed to send email');
                        }
                    }, 1000);
                });
            }
            
            // Handle individual player form submission
            document.getElementById('individual-player-form').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                // Hide any existing messages
                document.getElementById('player-success').style.display = 'none';
                document.getElementById('player-error').style.display = 'none';
                
                try {
                    // Collect form data
                    const formData = collectFormData(this);
                    
                    // Format email body
                    const emailBody = formatIndividualPlayerEmail(formData);
                    
                    // Send email
                    await sendEmail(
                        'example@crawleydartsleague.com',
                        'New Player Registration - Crawley Darts League',
                        emailBody
                    );
                    
                    // Show success message
                    document.getElementById('player-success').style.display = 'block';
                    
                    // Reset form
                    this.reset();
                    
                    // Hide previous league container
                    document.getElementById('previous-league-container').style.display = 'none';
                    
                    // Scroll to success message
                    document.getElementById('player-success').scrollIntoView({ behavior: 'smooth' });
                } catch (error) {
                    console.error('Error submitting form:', error);
                    document.getElementById('player-error').style.display = 'block';
                    document.getElementById('player-error').scrollIntoView({ behavior: 'smooth' });
                }
            });
            
            // Handle partial team form submission
            document.getElementById('partial-team-form').addEventListener('submit', async function(e) {
                e.preventDefault();
                
                // Hide any existing messages
                document.getElementById('partial-team-success').style.display = 'none';
                document.getElementById('partial-team-error').style.display = 'none';
                
                try {
                    // Collect form data
                    const formData = collectFormData(this);
                    
                    // Format email body
                    const emailBody = formatPartialTeamEmail(formData);
                    
                    // Send email
                    await sendEmail(
                        'example@crawleydartsleague.com',
                        'New Partial Team Registration - Crawley Darts League',
                        emailBody
                    );
                    
                    // Show success message
                    document.getElementById('partial-team-success').style.display = 'block';
                    
                    // Reset form
                    this.reset();
                    
                    // Scroll to success message
                    document.getElementById('partial-team-success').scrollIntoView({ behavior: 'smooth' });
                } catch (error) {
                    console.error('Error submitting form:', error);
                    document.getElementById('partial-team-error').style.display = 'block';
                    document.getElementById('partial-team-error').scrollIntoView({ behavior: 'smooth' });
                }
            });
            
            // Mobile navigation functionality
            const mobileToggle = document.querySelector('.mobile-toggle');
            const navMenu = document.querySelector('.nav-menu');
            const dropdownToggles = document.querySelectorAll('.dropdown-toggle');
            
            // Toggle mobile menu
            if (mobileToggle) {
                mobileToggle.addEventListener('click', function() {
                    navMenu.classList.toggle('active');
                    
                    // Animate hamburger to X
                    this.classList.toggle('active');
                    const bars = this.querySelectorAll('.bar');
                    if (this.classList.contains('active')) {
                        bars[0].style.transform = 'rotate(-45deg) translate(-5px, 6px)';
                        bars[1].style.opacity = '0';
                        bars[2].style.transform = 'rotate(45deg) translate(-5px, -6px)';
                    } else {
                        bars[0].style.transform = 'none';
                        bars[1].style.opacity = '1';
                        bars[2].style.transform = 'none';
                    }
                });
            }
            
            // Handle dropdown menus on mobile
            dropdownToggles.forEach(toggle => {
                toggle.addEventListener('click', function(e) {
                    // Only apply this behavior on mobile
                    if (window.innerWidth <= 768) {
                        e.preventDefault();
                        const parentLi = this.parentElement;
                        
                        // Close all other open dropdowns
                        document.querySelectorAll('.dropdown.active').forEach(item => {
                            if (item !== parentLi) {
                                item.classList.remove('active');
                            }
                        });
                        
                        // Toggle this dropdown
                        parentLi.classList.toggle('active');
                    }
                });
            });
            
            // Close menu when clicking outside
            document.addEventListener('click', function(e) {
                const isClickInsideNav = navMenu.contains(e.target) || (mobileToggle && mobileToggle.contains(e.target));
                if (!isClickInsideNav && navMenu.classList.contains('active')) {
                    navMenu.classList.remove('active');
                    if (mobileToggle) {
                        mobileToggle.classList.remove('active');
                        const bars = mobileToggle.querySelectorAll('.bar');
                        bars[0].style.transform = 'none';
                        bars[1].style.opacity = '1';
                        bars[2].style.transform = 'none';
                    }
                }
            });
            
            // Handle resize events
            window.addEventListener('resize', function() {
                if (window.innerWidth > 768) {
                    navMenu.classList.remove('active');
                    if (mobileToggle) {
                        mobileToggle.classList.remove('active');
                        const bars = mobileToggle.querySelectorAll('.bar');
                        bars[0].style.transform = 'none';
                        bars[1].style.opacity = '1';
                        bars[2].style.transform = 'none';
                    }
                    
                    // Reset all dropdowns
                    document.querySelectorAll('.dropdown.active').forEach(item => {
                        item.classList.remove('active');
                    });
                }
            });
        });
    </script>
</body>
</html>